!!! Strict
%html{ "xml:lang" => "en", :lang => "en", :xmlns => "http://www.w3.org/1999/xhtml" }
  %head
    %meta{ :content => "text/html;charset=UTF-8", "http-equiv" => "content-type" }
    %title
      = controller.controller_name
      \:
      = controller.action_name
    = stylesheet_link_tag 'scaffold'
    = javascript_include_tag :defaults
  %body
    %span{ :style => "float: right; text-align: right;" }
      = link_to "Source code", "http://github.com/binarylogic/authlogic_example"
      |
      = link_to "Setup tutorial", "http://www.binarylogic.com/2008/11/3/tutorial-authlogic-basic-setup"
      |
      = link_to "Password reset tutorial", "http://www.binarylogic.com/2008/11/16/tutorial-reset-passwords-with-authlogic"
      %br
      = link_to "OpenID tutorial", "http://www.binarylogic.com/2008/11/21/tutorial-using-openid-with-authlogic"
      |
      = link_to "Authlogic Repo", "http://github.com/binarylogic/authlogic"
      |
      = link_to "Authlogic Doc", "http://authlogic.rubyforge.org/"
    %h1
      Authlogic Example App
    = pluralize User.logged_in.count, "user"
    currently logged in
    %br
    /
      This based on last_request_at, if they were active < 10 minutes they are logged in
    %br
    %br
    - if !current_user
      = link_to "Register", new_account_path
      |
      = link_to "Log In", new_user_session_path
      |
    - else
      = link_to "My Account", account_path
      |
      = link_to "Logout", user_session_path, :method => :delete, :confirm => "Are you sure you want to logout?"
    %p{ :style => "color: green" }
      = flash[:notice]
    = yield
